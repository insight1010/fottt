# Настройка бота для Telegram Mini App

## Подготовка бота

1. **Откройте BotFather в Telegram**
   - Перейдите по ссылке: https://t.me/BotFather
   - Или найдите @BotFather в поиске Telegram

2. **Авторизуйте существующего бота**
   - Отправьте команду `/token`
   - Введите токен вашего бота: `7510747881:AAGuhzMKI6POfd4S3JIZctpitL_5uF2WR_w`
   - BotFather подтвердит, что токен принадлежит определенному боту

3. **Настройте команды бота (опционально)**
   - Отправьте команду `/setcommands`
   - Выберите вашего бота
   - Отправьте список команд в формате:
     ```
     app - Открыть FitChallenge
     help - Получить помощь
     about - О приложении
     ```

4. **Настройте описание бота (опционально)**
   - Отправьте команду `/setdescription`
   - Выберите вашего бота
   - Отправьте описание:
     ```
     FitChallenge - приложение для формирования фитнес-привычек и здорового образа жизни. Отслеживайте свои привычки, получайте награды и соревнуйтесь с друзьями!
     ```

5. **Настройте приветственное сообщение (опционально)**
   - Отправьте команду `/setabouttext`
   - Выберите вашего бота
   - Отправьте краткое описание:
     ```
     Формируйте полезные привычки с FitChallenge!
     ```

## Создание Telegram Mini App

1. **Отправьте команду для создания Mini App**
   - Отправьте команду `/newapp`
   - Выберите вашего бота

2. **Заполните информацию о приложении**
   - **Название**: FitChallenge
   - **Краткое описание**: Приложение для формирования фитнес-привычек и здорового образа жизни с аниме-аватаром
   - **Фото**: Загрузите изображение для иконки приложения (рекомендуемый размер 640x360 пикселей)
   - **URL**: Введите URL вашего приложения: `https://insight1010.github.io/fottt/`

3. **Получите ссылку на Mini App**
   - После завершения настройки BotFather предоставит вам ссылку на ваше Mini App
   - Эта ссылка будет иметь формат `https://t.me/your_bot_username/app`
   - Сохраните эту ссылку для дальнейшего использования

## Настройка кнопок для открытия Mini App

1. **Создайте кнопку в клавиатуре бота**
   - Используйте API Telegram для отправки сообщения с клавиатурой типа `web_app`
   - Пример кода для отправки такой кнопки:

```javascript
// Пример для Node.js с библиотекой node-telegram-bot-api
const TelegramBot = require('node-telegram-bot-api');
const bot = new TelegramBot('7510747881:AAGuhzMKI6POfd4S3JIZctpitL_5uF2WR_w', { polling: true });

bot.onText(/\/start/, (msg) => {
  const chatId = msg.chat.id;
  
  bot.sendMessage(chatId, 'Добро пожаловать в FitChallenge!', {
    reply_markup: {
      keyboard: [
        [{ text: 'Открыть FitChallenge', web_app: { url: 'https://insight1010.github.io/fottt/' } }]
      ],
      resize_keyboard: true
    }
  });
});
```

2. **Создайте inline-кнопку для открытия Mini App**
   - Пример кода для отправки inline-кнопки:

```javascript
bot.onText(/\/app/, (msg) => {
  const chatId = msg.chat.id;
  
  bot.sendMessage(chatId, 'Нажмите на кнопку ниже, чтобы открыть FitChallenge:', {
    reply_markup: {
      inline_keyboard: [
        [{ text: 'Открыть FitChallenge', web_app: { url: 'https://insight1010.github.io/fottt/' } }]
      ]
    }
  });
});
```

## Тестирование бота и Mini App

1. **Откройте чат с вашим ботом**
   - Найдите вашего бота по имени пользователя
   - Или перейдите по ссылке `https://t.me/your_bot_username`

2. **Отправьте команду /start**
   - Бот должен ответить приветственным сообщением
   - Если вы настроили клавиатуру, вы увидите кнопку для открытия Mini App

3. **Нажмите на кнопку для открытия Mini App**
   - Приложение должно открыться внутри Telegram
   - Проверьте, что все функции работают корректно

4. **Проверьте интеграцию с Telegram Web App API**
   - Убедитесь, что приложение получает данные пользователя
   - Проверьте работу кнопки "Назад" в хедере
   - Проверьте адаптацию темы приложения к теме Telegram

## Устранение проблем

Если у вас возникли проблемы с настройкой или работой Mini App:

1. **Проверьте URL приложения**
   - Убедитесь, что URL доступен и открывается в браузере
   - Проверьте, что приложение корректно работает вне Telegram

2. **Проверьте интеграцию с Telegram Web App API**
   - Убедитесь, что скрипт `telegram-webapp.js` правильно подключен
   - Проверьте, что в консоли нет ошибок

3. **Обновите настройки Mini App**
   - Используйте команду `/myapps` в BotFather
   - Выберите вашего бота и ваше приложение
   - Обновите URL или другие параметры при необходимости 